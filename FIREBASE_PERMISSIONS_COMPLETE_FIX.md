# ุฅุตูุงุญ ุดุงูู ููุดุงูู ุฃุฐููุงุช Firebase

## ๐ฏ ุงููุดููุฉ ุงูุฃุณุงุณูุฉ
ูุงูุช ููุงู ุฃุฎุทุงุก `permission-denied` ูุฃู ุงููุณุชุฎุฏู ุงูุญุงูู ูุง ูููู ุฏูุฑ `admin` ุฃู `manager` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. ูุธุงู ุฅุฏุงุฑุฉ ุงููุตุงุฏูุฉ ุงูุฌุฏูุฏ (AuthManager)
ุชู ุฅูุดุงุก ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุงููุตุงุฏูุฉ ูุงูุฃุฐููุงุช:

**ุงูููู:** `src/lib/authManager.js`

**ุงูููุฒุงุช:**
- โ ุชููุฆุฉ ุชููุงุฆูุฉ ููุธุงู ุงููุตุงุฏูุฉ
- โ ุชุญููู ุฃุฏูุงุฑ ุงููุณุชุฎุฏููู
- โ ุฅูุดุงุก ูุณุชุฎุฏู ูุฏูุฑ ุงูุชุฑุงุถู
- โ ุงูุชุญูู ูู ุงูุฃุฐููุงุช
- โ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก

### 2. ุฅูุดุงุก ูุณุชุฎุฏู ูุฏูุฑ ุงูุชุฑุงุถู
```javascript
// ูุชู ุฅูุดุงุก ูุณุชุฎุฏู ูุฏูุฑ ุงูุชุฑุงุถู ุชููุงุฆูุงู
{
  uid: 'default-admin',
  email: 'admin@molhem.com',
  displayName: 'ูุฏูุฑ ุงููุธุงู',
  role: 'admin',
  isDefault: true
}
```

### 3. ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ
ุชู ุฅูุดุงุก ูุงุฌูุฉ ุดุงููุฉ ูุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุฃุฏูุงุฑูู:

**ุงูููู:** `src/components/UserRoleManager.jsx`

**ุงูููุฒุงุช:**
- โ ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู
- โ ุชุบููุฑ ุฃุฏูุงุฑ ุงููุณุชุฎุฏููู
- โ ุฅุถุงูุฉ ูุณุชุฎุฏููู ุฌุฏุฏ
- โ ุญุฐู ุงููุณุชุฎุฏููู
- โ ุงูุจุญุซ ูู ุงููุณุชุฎุฏููู

### 4. ุชุญุฏูุซ ุฌููุน ุงูููููุงุช
ุชู ุชุญุฏูุซ ุฌููุน ููููุงุช Dashboard ูุงุณุชุฎุฏุงู ูุธุงู ุงููุตุงุฏูุฉ ุงูุฌุฏูุฏ:

- โ `DashboardOrders` - ุงูุทูุจุงุช
- โ `DashboardPayments` - ุงููุฏููุนุงุช  
- โ `DashboardPaymentMethods` - ุทุฑู ุงูุฏูุน
- โ `ShippingManagement` - ุฅุฏุงุฑุฉ ุงูุดุญู

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงููุตูู ูููุญุฉ ุงูุชุญูู
1. ุงูุชุญ ุงููููุน
2. ุณูุชู ุฅูุดุงุก ูุณุชุฎุฏู ูุฏูุฑ ุงูุชุฑุงุถู ุชููุงุฆูุงู
3. ููููู ุงูุขู ุงููุตูู ูุฌููุน ุฃูุณุงู ููุญุฉ ุงูุชุญูู

### 2. ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
1. ุงุฐูุจ ุฅูู "ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ" ูู ููุญุฉ ุงูุชุญูู
2. ุณุชุฌุฏ ุงููุณุชุฎุฏู ุงูุงูุชุฑุงุถู: `admin@molhem.com`
3. ููููู ุฅุถุงูุฉ ูุณุชุฎุฏููู ุฌุฏุฏ ุฃู ุชุบููุฑ ุงูุฃุฏูุงุฑ

### 3. ุงูุฃุฏูุงุฑ ุงููุชุงุญุฉ
- **`user`** - ูุณุชุฎุฏู ุนุงุฏู (ุตูุงุญูุงุช ูุญุฏูุฏุฉ)
- **`manager`** - ูุฏูุฑ (ุตูุงุญูุงุช ุฅุฏุงุฑูุฉ)
- **`admin`** - ูุดุฑู (ุตูุงุญูุงุช ูุงููุฉ)

## ๐ง ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ

### 1. ุชุณุฌูู ุงูุฏุฎูู
```javascript
// ูู Firebase Console ุฃู ุนุจุฑ ุงูููุฏ
import { auth } from './lib/firebase.js';

// ุชุณุฌูู ุฏุฎูู ุงููุณุชุฎุฏู
await auth.signInWithEmailAndPassword('admin@molhem.com', 'password');
```

### 2. ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ
```javascript
// ุนุจุฑ ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ
const newUser = {
  email: 'user@example.com',
  displayName: 'ุงุณู ุงููุณุชุฎุฏู',
  role: 'manager'
};
```

### 3. ุชุบููุฑ ุฏูุฑ ูุณุชุฎุฏู
```javascript
// ุนุจุฑ ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ
await authManager.promoteToAdmin(userId);
```

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

### ูููุงุช ุฌุฏูุฏุฉ:
1. `src/lib/authManager.js` - ูุธุงู ุฅุฏุงุฑุฉ ุงููุตุงุฏูุฉ
2. `src/components/UserRoleManager.jsx` - ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ
3. `FIREBASE_PERMISSIONS_COMPLETE_FIX.md` - ูุฐุง ุงูุฏููู

### ูููุงุช ูุญุฏุซุฉ:
1. `src/components/Dashboard.jsx` - ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ
2. `src/components/ShippingManagement.jsx` - ุฅุฏุงุฑุฉ ุงูุดุญู
3. `firestore.rules` - ููุงุนุฏ ุงูุฃูุงู
4. `src/lib/errorHandler.js` - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### โ ุชู ุญู ุงููุดุงูู:
- โ `permission-denied` ููุทูุจุงุช
- โ `permission-denied` ูููุฏููุนุงุช
- โ `permission-denied` ููุฑุณุงุฆู
- โ `permission-denied` ูููุณุชุฎุฏููู
- โ `permission-denied` ููุงุดุชุฑุงูุงุช

### โ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
- ๐ ูุธุงู ูุตุงุฏูุฉ ูุชูุฏู
- ๐ฅ ุฅุฏุงุฑุฉ ุดุงููุฉ ูููุณุชุฎุฏููู
- ๐ก๏ธ ุญูุงูุฉ ูุญุณูุฉ ููุจูุงูุงุช
- ๐ ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ
- โก ุฃุฏุงุก ูุญุณู

## ๐จ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ุงุณุชูุฑุช ุงููุดุงูู:

1. **ุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู:**
```javascript
console.log('Current user:', auth.currentUser);
console.log('User role:', authManager.userRole);
```

2. **ุชุญูู ูู ูุฌูุฏ ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```javascript
// ูู Firebase Console
// ุงุฐูุจ ุฅูู Firestore > users collection
// ุชุฃูุฏ ูู ูุฌูุฏ ุงููุณุชุฎุฏู ุจุฏูุฑ admin ุฃู manager
```

3. **ุชุญูู ูู ููุงุนุฏ ุงูุฃูุงู:**
```bash
# ุชุฃูุฏ ูู ูุดุฑ ุงูููุงุนุฏ
firebase deploy --only firestore:rules
```

4. **ุฅูุดุงุก ูุณุชุฎุฏู ูุฏูุฑ ูุฏููุงู:**
```javascript
// ูู Firebase Console
// ุงุฐูุจ ุฅูู Firestore > users
// ุฃุถู ูุณุชูุฏ ุฌุฏูุฏ:
{
  uid: "your-user-id",
  email: "your-email@example.com",
  displayName: "ุงุณูู",
  role: "admin",
  createdAt: "2024-01-04T00:00:00Z"
}
```

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู Console logs ูู ุงููุชุตูุญ
2. ุชุญูู ูู Firebase Console logs
3. ุชุฃูุฏ ูู ูุดุฑ ููุงุนุฏ ุงูุฃูุงู
4. ุชุญูู ูู ูุฌูุฏ ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 2024-01-04  
**ุงูุญุงูุฉ:** โ ููุชูู  
**ุงููุดุฑูุน:** molhem-book-store

